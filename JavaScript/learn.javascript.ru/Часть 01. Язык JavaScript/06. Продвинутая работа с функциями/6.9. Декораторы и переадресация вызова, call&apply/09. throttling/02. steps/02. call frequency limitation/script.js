/*2025.05.20 11:53 IMM*/

// ‚úÖ –®–ê–ì 2: –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —á–∞—Å—Ç–æ—Ç—É –≤—ã–∑–æ–≤–æ–≤
// –¢–µ–ø–µ—Ä—å –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è func:
// ‚úÖ –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ;
// ‚ùå –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –ø–æ–≤—Ç–æ—Ä–Ω–æ, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø—Ä–æ—à–ª–æ ms –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥.
// –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–µ–Ω —Ñ–ª–∞–≥ ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Å–∫–∞–∂–µ—Ç:
// ¬´–§—É–Ω–∫—Ü–∏—è —É–∂–µ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞, –ø–æ–¥–æ–∂–¥–∏!¬ª

function throttle(func, ms) {
  // üîí –§–ª–∞–≥, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –∏ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ms –º—Å
  let isThrottled = false;

  return function (...args) {
    // –ï—Å–ª–∏ —Ñ–ª–∞–≥ –≤–∫–ª—é—á—ë–Ω ‚Äî –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ—à–ª–æ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏
    if (isThrottled) {
      // ‚ùå –ü—Ä–æ—Å—Ç–æ –≤—ã—Ö–æ–¥–∏–º ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      return;
    }

    // ‚úÖ –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é
    func.apply(this, args);

    // ‚õî –°—Ç–∞–≤–∏–º "—Ç–æ—Ä–º–æ–∑" ‚Äî –±–ª–æ–∫–∏—Ä—É–µ–º –¥–∞–ª—å–Ω–µ–π—à–∏–µ –≤—ã–∑–æ–≤—ã
    isThrottled = true;

    // –ü–æ–∫–∞ –Ω–µ—Ç —Ç–∞–π–º–µ—Ä–∞, –Ω–æ —ç—Ç–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ
  };
}

function log(a) {
  console.log(a);
}

let throttledLog = throttle(log, 1000);

throttledLog(1); // ‚úÖ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –≤—ã–≤–µ–¥–µ—Ç 1
throttledLog(2); // ‚ùå –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
throttledLog(3); // ‚ùå –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

// üìå –ü–æ–∫–∞ —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑, –∏ –ø–æ—Ç–æ–º –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞.
// üëâ –°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –º—ã –¥–æ–±–∞–≤–∏–º setTimeout, —á—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ ms –º—Å.