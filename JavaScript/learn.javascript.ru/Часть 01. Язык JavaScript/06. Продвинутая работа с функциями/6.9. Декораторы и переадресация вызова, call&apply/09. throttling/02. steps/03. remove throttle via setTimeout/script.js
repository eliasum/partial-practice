/*2025.05.20 16:30 IMM*/

// ‚úÖ –®–ê–ì 3: —Å–Ω–∏–º–∞–µ–º "—Ç–æ—Ä–º–æ–∑" —á–µ—Ä–µ–∑ setTimeout
// –ù–∞ –ø—Ä–æ—à–ª–æ–º —à–∞–≥–µ –º—ã:
// –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –≤—ã–∑–æ–≤—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ (isThrottled = true);
// –Ω–æ –Ω–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∏—Ö ‚Äî func –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞.
// –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º —Ç–∞–π–º–µ—Ä, —á—Ç–æ–±—ã —á–µ—Ä–µ–∑ ms –º—Å —Å–Ω–æ–≤–∞ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–∑–æ–≤.

// "—Ç–æ—Ä–º–æ–∑—è—â–∞—è" —Ñ—É–Ω–∫—Ü–∏—è-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä
function throttle(func, ms) {
  // üîí –§–ª–∞–≥, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ms –º—Å
  let isThrottled = false;

  // –æ–±—ë—Ä–Ω—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è
  return function (...args) {
    // –ï—Å–ª–∏ —Ñ–ª–∞–≥ –≤–∫–ª—é—á—ë–Ω ‚Äî –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ—à–ª–æ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏
    if (isThrottled) {
      // ‚ùå –ü—Ä–æ—Å—Ç–æ –≤—ã—Ö–æ–¥–∏–º ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
      return;
    }

    // ‚úÖ –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é
    func.apply(this, args);

    // ‚õî –°—Ç–∞–≤–∏–º "—Ç–æ—Ä–º–æ–∑" ‚Äî –±–ª–æ–∫–∏—Ä—É–µ–º –¥–∞–ª—å–Ω–µ–π—à–∏–µ –≤—ã–∑–æ–≤—ã
    isThrottled = true;

    // ‚è≥ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä: —á–µ—Ä–µ–∑ ms –º—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
    setTimeout(() => {
      isThrottled = false; // üîì –¢–µ–ø–µ—Ä—å —Å–Ω–æ–≤–∞ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å
    }, ms);
  };
}

function log(a) {
  console.log(a);
}

let throttledLog = throttle(log, 1000);

throttledLog(1); // ‚úÖ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –≤—ã–≤–µ–¥–µ—Ç 1
throttledLog(2); // ‚ùå –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
throttledLog(3); // ‚ùå –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

setTimeout(() => throttledLog(4), 1100); // ‚úÖ –≤—ã–≤–µ–¥–µ—Ç 4 (—á–µ—Ä–µ–∑ 1100 –º—Å)

// üìç –¢–µ–ø–µ—Ä—å func –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ —á–∞—â–µ, —á–µ–º —Ä–∞–∑ –≤ ms –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥.

// ‚ùó–ù–æ: –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (—Ç–æ—Ä–º–æ–∑–∞) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–æ–≤–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–±—ë—Ä—Ç–∫—É ‚Äî –≤—Å–µ —ç—Ç–∏ –≤—ã–∑–æ–≤—ã —Ç–µ—Ä—è—é—Ç—Å—è.

// üëâ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –∑–∞–ø–æ–º–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–∑–æ–≤ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.